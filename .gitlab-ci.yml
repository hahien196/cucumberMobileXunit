variables:
    GIT_CLONE_PATH: '$CI_BUILDS_DIR/$CI_PROJECT_NAME'
    FF_ENABLE_JOB_CLEANUP: 1

stages: 
  - test
  - cleanup


test:
  tags:
    - appium
  script: 
    - |
      cd $GIT_CLONE_PATH
    - powershell -Command Set-Executionpolicy -ExecutionPolicy Unrestricted -Scope Process
    - dotnet test CTV.Application.SpecFlowAppiumTests\CTV.Application.SpecFlowAppiumTests.csproj --results-directory "$GIT_CLONE_PATH"

cleanup:
  script:
    - cleanup_file_variables
